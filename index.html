<!DOCTYPE html>
<html>
    <head>
        <title>
            RockPaperScissors
        </title>
    </head>
    <body>
        <h1>
            Dare to play ...
        </h1>
        <div id="select">
            <button id="rock" class="option">Rock</button>
            <button id="paper" class="option">Paper</button>
            <button id="scissors" class="option">Rock</button>
        </div>
        <div id="result">
            <div id="usercon">
                <p>You</p>
                <p id="usersc">0</p>
            </div>
            <p>-</p>
            <div id="compcon">
                <p>Computer</p>
                <p id="compsc">0</p>
            </div>
        </div>
        <div>
            <p id="finalres">
                
            </p>
        </div>
    </body>
    <script>
        function computerSelection(){
            let choices = ["rock","paper","scissors"];
            return choices[Math.floor(Math.random()*3)];
        }

        function play (playerSelection,computerSelection){
            pl = playerSelection.toUpperCase();
            comp = computerSelection.toUpperCase();

            if (pl == "ROCK"){
                switch(comp){
                    case "ROCK":
                        return "Draw, rock vs rock.";
                    
                    case "PAPER":
                        return "You lose, paper beats rock.";

                    case "SCISSORS":
                        return "You win, rock beats scissors."

                    default:
                        return "error, computer cheated";
                }
            }

            else if (pl == "PAPER"){
                switch(comp){
                    case "ROCK":
                        return "You win, paper beats rock.";
                    
                    case "PAPER":
                        return "Draw, paper vs paper.";

                    case "SCISSORS":
                        return "You lose, scissors beat paper."

                    default:
                        return "error, computer cheated";
                }
            }

            else if (pl == "SCISSORS"){
                switch(comp){
                    case "ROCK":
                        return "You lose, rock beats scissors.";
                    
                    case "PAPER":
                        return "You win, scissors beat paper.";

                    case "SCISSORS":
                        return "Draw, scissors vs scissors."

                    default:
                        return "error, computer cheated";
                }
            }

            else{
                return "come on ... don't cheat";
            }
        }

        function singleRound(plop,plsc,compsc){
            
            let compop = computerSelection();
            let result = play(plop,compop);
            console.log(result);

            result = result.toLowerCase();
                
            if (result.includes("win")){
                plsc++;
                let usersc = document.querySelector("#usersc");
                usersc.textContent = plsc;
            }
            if (result.includes("lose")){
                compsc++;
                let comsc = document.querySelector("#compsc");
                comsc.textContent = compsc;
            }

            if(result.includes("cheat")){
                alert(result);
            }
        }

        function game (plsc,compsc){
            
            let buttonRock = document.querySelector("#rock");
            let buttonPaper = document.querySelector("#paper");
            let buttonScissors = document.querySelector("#scissors");

            buttonRock.addEventListener("click",singleRound("rock",plsc,compsc));
            buttonPaper.addEventListener("click",singleRound("paper",plsc,compsc));
            buttonScissors.addEventListener("click",singleRound("scissors",plsc,compsc));

        }

        let plsc=0; compsc=0;
        while((plsc<3)&&(compsc<3)){
            game(plsc,compsc);
        }

    </script>
</html>